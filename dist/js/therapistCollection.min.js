import{filter,fetchJSON}from"./script.min.js";import VisitTherapist from"./therapist.js";export default class TherapistCollection{constructor(){this.list=[]}addVisit(t,e,i,s,r){const o={fullName:t,status:"open",urgency:e,purpose:i,description:s,age:r},n=JSON.stringify(o);fetchJSON("https://frozen-mountain-86271.herokuapp.com/therapist",{method:"POST",headers:{"Content-type":"application/json"},body:n}).then((t=>{const i=new VisitTherapist(t.id,o.purpose,o.description,e,o.fullName,o.status,o.age);this.list.push(i),i.render(),filter.loadFilter()}))}getCollection(){fetchJSON("https://frozen-mountain-86271.herokuapp.com/therapist").then((t=>{t.forEach((t=>{const e=new VisitTherapist(t.id,t.purpose,t.description,t.urgency,t.fullName,t.status,t.age);this.list.push(e),e.render(),filter.loadFilter()}))}))}removeById(t){fetch("https://frozen-mountain-86271.herokuapp.com/therapist/${id}",{method:"DELETE"}).then((()=>{this.list.find((e=>e.id===t)).visitCard.remove();const e=this.list.findIndex((e=>e.id===t));this.list.splice(e,1),filter.loadFilter()}))}}