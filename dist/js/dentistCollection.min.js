import{filter,fetchJSON}from"./script.min.js";import VisitDentist from"./dentist.js";export default class DentistCollection{constructor(){this.list=[]}addVisit(t,i,e,s,o){const n={fullName:t,status:"open",urgency:i,purpose:e,description:s,lastVisit:o},r=JSON.stringify(n);fetchJSON("https://frozen-mountain-86271.herokuapp.com/dentist",{method:"POST",headers:{"Content-type":"application/json"},body:r}).then((t=>{const e=new VisitDentist(t.id,n.purpose,n.description,i,n.fullName,n.status,n.lastVisit);this.list.push(e),console.log(e),e.render(),filter.loadFilter()}))}getCollection(){fetchJSON("https://frozen-mountain-86271.herokuapp.com/dentist").then((t=>{t.forEach((t=>{const i=new VisitDentist(t.id,t.purpose,t.description,t.urgency,t.fullName,t.status,t.lastVisit);this.list.push(i),i.render(),filter.loadFilter()}))}))}removeById(t){fetch("https://frozen-mountain-86271.herokuapp.com/dentist/${id}",{method:"DELETE"}).then((()=>{this.list.find((i=>i.id===t)).visitCard.remove();const i=this.list.findIndex((i=>i.id===t));this.list.splice(i,1),filter.loadFilter()}))}}